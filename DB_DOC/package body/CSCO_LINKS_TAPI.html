<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF8" />
<script src="CSCO_LINKS_TAPI/report.js" type="text/javascript"></script>
<link href="CSCO_LINKS_TAPI/report.css" type="text/css" rel="stylesheet">
</head>
<body>
<div class="banner">
<table width="98%"><tr>
<td><h2 class="banner">CSCO_LINKS_TAPI</h2></td>
</tr></table></div>
<div id="maintabs">
<div class="currentmaintab" onclick="onSelectMainTab(this, 0)">
<div>
<p>Doc</p>
</div>
</div>
<div class="maintab" onclick="onSelectMainTab(this, 1)">
<div>
<p>Details</p>
</div>
</div>
<div class="maintab" onclick="onSelectMainTab(this, 2)">
<div>
<p>Grants</p>
</div>
</div>
<div class="maintab" onclick="onSelectMainTab(this, 3)">
<div>
<p>References</p>
</div>
</div>
<div class="maintab" onclick="onSelectMainTab(this, 4)">
<div>
<p>Dependencies</p>
</div>
</div>
<div class="maintab" onclick="onSelectMainTab(this, 5)">
<div>
<p>Code</p>
</div>
</div>
</div>
<br/>
<div id="masterreports">
<div id="Master.0">
<div class="currentmasterreport">
<TABLE CELLSPACING="0" CELLPADDING="1" WIDTH="100%" BORDER="0">
<TR><TD CLASS="NavBarRow3" VALIGN="top"><FONT SIZE="-2">      SUMMARY:  <A HREF="#field_summary">FIELD</A> | <A HREF="#type_summary">TYPE</A> | <A HREF="#method_summary">METHOD</A></FONT></TD><TD CLASS="NavBarRow3" VALIGN="top"><FONT SIZE="-2"></TR></TABLE><HR><P> GET LINKS</P><HR><TABLE CELLSPACING="0" CELLPADDING="1" WIDTH="100%" BORDER="0">
<TR><TD CLASS="NavBarRow3" VALIGN="top"><FONT SIZE="-2">      SUMMARY:  <A HREF="#field_summary">FIELD</A> | <A HREF="#type_summary">TYPE</A> | <A HREF="#method_summary">METHOD</A></FONT></TD><TD CLASS="NavBarRow3" VALIGN="top"><FONT SIZE="-2"></TR></TABLE></div>
</div>
<div id="Master.1">
<div class="masterreport">
<table id="Table.0" cellpadding="0" cellspacing="0" summary="">
<th>NAME</th>
<th>VALUE</th>
</tr>
<tr>
<td>OWNER</td>
<td>MCARRASCO</td>
</tr>
<tr>
<td>OBJECT_NAME</td>
<td>CSCO_LINKS_TAPI</td>
</tr>
<tr>
<td>SUBOBJECT_NAME</td>
<td>null</td>
</tr>
<tr>
<td>OBJECT_ID</td>
<td>219823</td>
</tr>
<tr>
<td>DATA_OBJECT_ID</td>
<td>null</td>
</tr>
<tr>
<td>OBJECT_TYPE</td>
<td>PACKAGE&nbsp;BODY</td>
</tr>
<tr>
<td>CREATED</td>
<td>23.01.2017&nbsp;11:46:02</td>
</tr>
<tr>
<td>LAST_DDL_TIME</td>
<td>23.01.2017&nbsp;14:23:20</td>
</tr>
<tr>
<td>TIMESTAMP</td>
<td>2017-01-23:14:23:20</td>
</tr>
<tr>
<td>STATUS</td>
<td>VALID</td>
</tr>
<tr>
<td>TEMPORARY</td>
<td>N</td>
</tr>
<tr>
<td>GENERATED</td>
<td>N</td>
</tr>
<tr>
<td>SECONDARY</td>
<td>N</td>
</tr>
<tr>
<td>NAMESPACE</td>
<td>2</td>
</tr>
<tr>
<td>EDITION_NAME</td>
<td>null</td>
</tr>
<tr>
<td>SHARING</td>
<td>NONE</td>
</tr>
<tr>
<td>EDITIONABLE</td>
<td>Y</td>
</tr>
<tr>
<td>ORACLE_MAINTAINED</td>
<td>N</td>
</tr>
</table>
</div>
</div>
<div id="Master.2">
<div class="masterreport">
<table id="Table.1" cellpadding="0" cellspacing="0" summary="">
<tr>
<th>PRIVILEGE</th>
<th>GRANTEE</th>
<th>GRANTABLE</th>
<th>GRANTOR</th>
<th>OBJECT_NAME</th>
</tr>
<tr onclick="table_onSelectMasterRow(this, 1, 0)" class="currentrow">
<td class="currentcell">EXECUTE</td>
<td class="currentcell">PRFC</td>
<td class="currentcell">NO</td>
<td class="currentcell">MCARRASCO</td>
<td class="currentcell">CSCO_LINKS_TAPI</td>
</tr>
</table>
</div>
</div>
<div id="Master.3">
<div class="masterreport">
<table id="Table.2" cellpadding="0" cellspacing="0" summary="">
<tr>
<th>NAME</th>
<th>OWNER</th>
<th>TYPE</th>
<th>OBJECT_ID</th>
<th>STATUS</th>
<th>TYPE_LINK</th>
</tr>
</table>
</div>
</div>
<div id="Master.4">
<div class="masterreport">
<table id="Table.3" cellpadding="0" cellspacing="0" summary="">
<tr>
<th>NAME</th>
<th>OWNER</th>
<th>TYPE</th>
<th>OBJECT_ID</th>
<th>STATUS</th>
<th>TYPE_LINK</th>
</tr>
<tr onclick="table_onSelectMasterRow(this, 3, 0)" class="currentrow">
<td class="currentcell">G_ERROR_LOG_NEW</td>
<td class="currentcell">MCARRASCO</td>
<td class="currentcell">PACKAGE</td>
<td class="currentcell">99869</td>
<td class="currentcell">VALID</td>
<td class="currentcell">PACKAGE</td>
</tr>
<tr onclick="table_onSelectMasterRow(this, 3, 1)">
<td>PLITBLM</td>
<td>PUBLIC</td>
<td>SYNONYM</td>
<td>6153</td>
<td>VALID</td>
<td>SYNONYM</td>
</tr>
<tr onclick="table_onSelectMasterRow(this, 3, 2)">
<td>CSCO_LINKS_TAPI_REC</td>
<td>MCARRASCO</td>
<td>TYPE</td>
<td>219784</td>
<td>VALID</td>
<td>TYPE</td>
</tr>
<tr onclick="table_onSelectMasterRow(this, 3, 3)">
<td>CSCO_LINKS_TAPI</td>
<td>MCARRASCO</td>
<td>PACKAGE</td>
<td>219821</td>
<td>VALID</td>
<td>PACKAGE</td>
</tr>
<tr onclick="table_onSelectMasterRow(this, 3, 4)">
<td>CSCO_LINKS</td>
<td>MCARRASCO</td>
<td>TABLE</td>
<td>168591</td>
<td>VALID</td>
<td>TABLE</td>
</tr>
<tr onclick="table_onSelectMasterRow(this, 3, 5)">
<td>CSCO_LINKS_TAPI_TAB</td>
<td>MCARRASCO</td>
<td>TYPE</td>
<td>219817</td>
<td>VALID</td>
<td>TYPE</td>
</tr>
</table>
</div>
</div>
<div id="Master.5">
<div class="masterreport">
<pre>
PACKAGE body CSCO_LINKS_TAPI
IS
  -- GET LINKS
  FUNCTION P_GET_CSCO_LINKS RETURN SYS_REFCURSOR AS
  --
    V_LINKS_DATA SYS_REFCURSOR := NULL;
  BEGIN
    OPEN V_LINKS_DATA FOR
       SELECT ELEMENT_ID,
              ELEMENT_ALIASES,
              VALID_START_DATE,
              VALID_FINISH_DATE,
              TIPO,
              ORIGEN,
              DESTINO,
              FLAG_ENABLED,
              GRUPO,
              PAIS,
              ELEMENT_TYPE,
              ELEMENT_NAME,
              INTERFACE_NAME,
              GROUP_TYPE,
              ELEMENT_IP,
              NOMBRE_GRUPO,
              FRONTERA,
              SPEED_MODIFY
      FROM CSCO_LINKS ;
    RETURN V_LINKS_DATA;
    
  END P_GET_CSCO_LINKS;
  -- insert
  PROCEDURE P_CSCO_LINKS_INS(P_LINKS_DATA IN CSCO_LINKS_TAPI_TAB,P_ERROR OUT NUMBER) IS
     --
    l_errors NUMBER;
    l_errno  NUMBER;
    l_msg    VARCHAR2(4000 CHAR);
    l_idx    NUMBER;
  BEGIN
    EXECUTE IMMEDIATE 'alter session set nls_date_format = ''DD.MM.YYYY HH24:MI:SS''';
    FORALL indice IN INDICES OF P_LINKS_DATA SAVE EXCEPTIONS
      MERGE INTO CSCO_LINKS CL
      USING DUAL
      ON (CL.ELEMENT_ALIASES = P_LINKS_DATA(indice).ELEMENT_ALIASES AND CL.ELEMENT_ID = P_LINKS_DATA(indice).ELEMENT_ID)
      WHEN MATCHED THEN
        UPDATE SET 
          --ELEMENT_ID= CSCO_LINKS_tapi_tab(indice).ELEMENT_ID,
          --ELEMENT_ALIASES   = P_LINKS_DATA(indice).ELEMENT_ALIASES,
          VALID_START_DATE  = P_LINKS_DATA(indice).VALID_START_DATE,                 
          VALID_FINISH_DATE = P_LINKS_DATA(indice).VALID_FINISH_DATE,               
          TIPO              = P_LINKS_DATA(indice).TIPO,            
          ORIGEN            = P_LINKS_DATA(indice).ORIGEN,        
          DESTINO           = P_LINKS_DATA(indice).DESTINO,      
          FLAG_ENABLED      = P_LINKS_DATA(indice).FLAG_ENABLED,      
          GRUPO             = P_LINKS_DATA(indice).GRUPO,          
          PAIS              = P_LINKS_DATA(indice).PAIS,            
          ELEMENT_TYPE      = P_LINKS_DATA(indice).ELEMENT_TYPE,
          ELEMENT_NAME      = P_LINKS_DATA(indice).ELEMENT_NAME,      
          INTERFACE_NAME    = P_LINKS_DATA(indice).INTERFACE_NAME,  
          GROUP_TYPE        = P_LINKS_DATA(indice).GROUP_TYPE,
          ELEMENT_IP        = P_LINKS_DATA(indice).ELEMENT_IP,
          NOMBRE_GRUPO      = P_LINKS_DATA(indice).NOMBRE_GRUPO,      
          FRONTERA          = P_LINKS_DATA(indice).FRONTERA,    
          SPEED_MODIFY      = P_LINKS_DATA(indice).SPEED_MODIFY
      WHEN NOT MATCHED THEN
        INSERT (ELEMENT_ID,ELEMENT_ALIASES,VALID_START_DATE,VALID_FINISH_DATE,TIPO,ORIGEN,DESTINO,FLAG_ENABLED,GRUPO,
                PAIS,ELEMENT_TYPE,ELEMENT_NAME,INTERFACE_NAME,GROUP_TYPE,ELEMENT_IP,NOMBRE_GRUPO,FRONTERA,SPEED_MODIFY)
        VALUES (P_LINKS_DATA(indice).ELEMENT_ID,P_LINKS_DATA(indice).ELEMENT_ALIASES,P_LINKS_DATA(indice).VALID_START_DATE,
                P_LINKS_DATA(indice).VALID_FINISH_DATE,P_LINKS_DATA(indice).TIPO,P_LINKS_DATA(indice).ORIGEN,    
                P_LINKS_DATA(indice).DESTINO,P_LINKS_DATA(indice).FLAG_ENABLED,P_LINKS_DATA(indice).GRUPO,     
                P_LINKS_DATA(indice).PAIS,P_LINKS_DATA(indice).ELEMENT_TYPE,P_LINKS_DATA(indice).ELEMENT_NAME,   
                P_LINKS_DATA(indice).INTERFACE_NAME,P_LINKS_DATA(indice).GROUP_TYPE,P_LINKS_DATA(indice).ELEMENT_IP,
                P_LINKS_DATA(indice).NOMBRE_GRUPO,P_LINKS_DATA(indice).FRONTERA,P_LINKS_DATA(indice).SPEED_MODIFY
                );
      P_ERROR := 0;
      --
      EXCEPTION
          WHEN OTHERS THEN
            L_ERRORS := SQL%BULK_EXCEPTIONS.COUNT;
            FOR indice IN 1 .. L_ERRORS
            LOOP
              L_ERRNO := SQL%BULK_EXCEPTIONS(indice).ERROR_CODE;
              L_MSG   := SQLERRM(-L_ERRNO);
              L_IDX   := SQL%BULK_EXCEPTIONS(indice).ERROR_INDEX;
              g_error_log_new.P_LOG_ERROR('P_CSCO_LINKS_INS',
                                          L_ERRNO,
                                          L_MSG,
                                          'ELEMENT_ID => '||TO_CHAR(P_LINKS_DATA(indice).ELEMENT_ID)||                             
                                          ' ELEMENT_ALIASES => '||P_LINKS_DATA(indice).ELEMENT_ALIASES||                   
                                          ' VALID_START_DATE => '||P_LINKS_DATA(indice).VALID_START_DATE||                 
                                          ' VALID_FINISH_DATE => '||P_LINKS_DATA(indice).VALID_FINISH_DATE||               
                                          ' TIPO => '||P_LINKS_DATA(indice).TIPO||                                         
                                          ' ORIGEN => '||P_LINKS_DATA(indice).ORIGEN||                                     
                                          ' DESTINO => '||P_LINKS_DATA(indice).DESTINO||                                   
                                          ' FLAG_ENABLED => '||P_LINKS_DATA(indice).FLAG_ENABLED||                         
                                          ' GRUPO => '||P_LINKS_DATA(indice).GRUPO||                                       
                                          ' PAIS => '||P_LINKS_DATA(indice).PAIS||                                         
                                          ' ELEMENT_TYPE => '||P_LINKS_DATA(indice).ELEMENT_TYPE||                         
                                          ' ELEMENT_NAME => '||P_LINKS_DATA(indice).ELEMENT_NAME||                         
                                          ' INTERFACE_NAME => '||P_LINKS_DATA(indice).INTERFACE_NAME||                     
                                          ' GROUP_TYPE => '||P_LINKS_DATA(indice).GROUP_TYPE||                             
                                          ' ELEMENT_IP => '||P_LINKS_DATA(indice).ELEMENT_IP||                             
                                          ' NOMBRE_GRUPO => '||P_LINKS_DATA(indice).NOMBRE_GRUPO||                         
                                          ' FRONTERA => '||P_LINKS_DATA(indice).FRONTERA||                                 
                                          ' SPEED_MODIFY => '||TO_CHAR(P_LINKS_DATA(indice).SPEED_MODIFY));
              P_ERROR := 1;
            END LOOP;
  COMMIT;
  END P_CSCO_LINKS_INS;
END CSCO_LINKS_TAPI;</pre>
</div>
</div>
</div>
</body>
</html>
